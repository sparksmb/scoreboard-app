.page-header
  %h2 Update Scoreboard: #{@game.display_name}
  = link_to "Back to Scoreboard", game_scoreboard_path(@game, @scoreboard), class: "btn btn-secondary"

.card
  = form_with model: [@game, @scoreboard], url: game_scoreboard_path(@game, @scoreboard), local: true do |form|
    - if @scoreboard.errors.any?
      .alert.alert-danger
        %h4= pluralize(@scoreboard.errors.count, "error") + " prohibited this scoreboard from being updated:"
        %ul
          - @scoreboard.errors.full_messages.each do |message|
            %li= message
    
    .score-section{style: "display: flex; gap: 2rem; margin-bottom: 2rem;"}
      .home-team{style: "flex: 1; text-align: center; padding: 1rem; border: 2px solid #dee2e6; border-radius: 8px;"}
        %h4= @game.home_team.name
        - if @game.home_team.logo.attached?
          = image_tag @game.home_team.logo, style: "max-width: 80px; max-height: 80px; margin-bottom: 10px;"
        .form-group
          = form.label :home_score, "Score"
          = form.number_field :home_score, min: 0, required: true, style: "width: 100px; font-size: 1.5rem; text-align: center;"
        - if @scoreboard.is_a?(FootballScoreboard)
          .form-group{style: "margin-top: 15px;"}
            = form.label :home_timeouts_remaining, "Timeouts"
            = form.number_field :home_timeouts_remaining, min: 0, max: 3, required: true, style: "width: 80px; text-align: center;", value: @scoreboard.home_timeouts_remaining
      
      .visitor-team{style: "flex: 1; text-align: center; padding: 1rem; border: 2px solid #dee2e6; border-radius: 8px;"}
        %h4= @game.visitor_team.name
        - if @game.visitor_team.logo.attached?
          = image_tag @game.visitor_team.logo, style: "max-width: 80px; max-height: 80px; margin-bottom: 10px;"
        .form-group
          = form.label :visitor_score, "Score"
          = form.number_field :visitor_score, min: 0, required: true, style: "width: 100px; font-size: 1.5rem; text-align: center;"
        - if @scoreboard.is_a?(FootballScoreboard)
          .form-group{style: "margin-top: 15px;"}
            = form.label :visitor_timeouts_remaining, "Timeouts"
            = form.number_field :visitor_timeouts_remaining, min: 0, max: 3, required: true, style: "width: 80px; text-align: center;", value: @scoreboard.visitor_timeouts_remaining
    
    - if @scoreboard.is_a?(FootballScoreboard)
      .football-controls{style: "display: flex; gap: 2rem; margin-bottom: 2rem;"}
        .form-group{style: "flex: 1;"}
          = form.label :quarter, "Quarter"
          = form.select :quarter, options_for_select((1..4).map { |q| ["Quarter #{q}", q] } + [["Overtime", 5]], @scoreboard.quarter), {}, { required: true }
        
        .form-group{style: "flex: 1;"}
          = form.label :time_remaining, "Time Remaining (MM:SS)"
          = form.text_field :time_remaining, required: true, pattern: "[0-5]?[0-9]:[0-5][0-9]", placeholder: "15:00"
    
    .form-actions
      = form.submit "Update Scoreboard", class: "btn"
      = link_to "Cancel", game_scoreboard_path(@game, @scoreboard), class: "btn btn-secondary"
