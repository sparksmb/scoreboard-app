.page-header
  %h2 Organizations
  - if current_user.admin?
    = link_to "New Organization", new_organization_path, class: "btn"

- if @organizations.any?
  %table
    %thead
      %tr
        %th Name
        %th Status
        %th Users
        %th Created
        %th Actions
    %tbody
      - @organizations.each do |organization|
        %tr
          %td
            = link_to organization.name, organization_path(organization)
          %td
            %span{style: "color: #{organization.active? ? '#28a745' : '#dc3545'};"}
              = organization.active? ? 'Active' : 'Inactive'
          %td= organization.users.count
          %td= organization.created_at.strftime("%B %d, %Y")
          %td
            = link_to "View", organization_path(organization), class: "btn btn-secondary"
            - if current_user.admin? || current_user.organization == organization
              = link_to "Edit", edit_organization_path(organization), class: "btn btn-secondary"
            - if current_user.admin?
              = link_to "Delete", organization_path(organization),
                method: :delete,
                class: "btn btn-danger",
                confirm: "Are you sure? This will also delete all associated users.",
                data: { turbo_method: :delete }
- else
  .card
    %p No organizations found.
    - if current_user.admin?
      = link_to "Create the first organization", new_organization_path, class: "btn"
